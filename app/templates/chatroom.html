{% extends "base.html" %}

{% block content %}
<h2>Room: {{ room.name }}</h2>

<hr>

<h3>Messages:</h3>

<ul id="messageList" class="message-list">
    {% for message in messages %}
        <li>
            <strong>{{ message.user.username }}</strong>: {{ message.content }}
        </li>
    {% endfor %}
</ul>

<hr>

<h3>Send a Message</h3>

<div>
    <input id="messageInput" type="text" placeholder="Write your message..." required>
    <button onclick="sendMessage()">Send</button>
</div>

<script src="/static/js/chat.js"></script>

<script>
    // Connect WebSocket
    const roomId = "{{ room.id }}";
    const userId = "{{ request.session.get('user_id') }}";
    connectWebSocket(roomId, userId);
</script>

{% endblock %}
